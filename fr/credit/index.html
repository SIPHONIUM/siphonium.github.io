<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Notre Ã‰quipe</title>
  <link rel="stylesheet" href="../style.css?v=8">
</head>
<body>
  <header>
    <h1>SIPHONIUM</h1>
    <p>Le monde oÃ¹ ton aventure commence.</p>
    <nav>
      <a href="../">Accueil</a>
      <a href="../shop/">Shop</a>
      <a href="../launcher/">Launcher</a>
      <a href="">CrÃ©dits</a>
    </nav>
  </header>

  <main>
    <h1 style="text-align:center; margin:30px 0;">ðŸ”¥ Notre Ã‰quipe ðŸ”¥</h1>

    <!-- Container oÃ¹ les cards vont sâ€™injecter -->
    <div class="team-container" id="team"></div>
  </main>

  <!-- Modal -->
  <div id="modal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <div class="modal-content" id="modal-content"></div>
  </div>

  <script>
    async function loadTeam() {
      const res = await fetch("team.json");
      const team = await res.json();
      const container = document.getElementById("team");

      team.forEach(member => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <img src="${member.img}" alt="${member.name}">
          <h2>${member.name}</h2>
          <p>${member.role}</p>
          <button class="btn" onclick="openModal('${member.id}')">Voir plus</button>
        `;
        container.appendChild(card);
      });

      // stocker les donnÃ©es pour les modals
      window.teamData = team.reduce((acc, m) => { acc[m.id] = m; return acc; }, {});
    }

    function openModal(id) {
      const data = window.teamData[id];
      document.getElementById("modal-content").innerHTML = `
        <img src="${data.img}" alt="${data.name}">
        <h2>${data.name}</h2>
        <p><strong>${data.role}</strong></p>
        <p>${data.desc}</p>
        <p><em>${data.contact}</em></p>
      `;
      document.getElementById("modal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }

    window.onclick = e => {
      if (e.target == document.getElementById("modal")) closeModal();
    };

    loadTeam();
  </script>
  <script>
    function pingActivity(from) {
        const url = 'https://siphonium.alwaysdata.net/panel/website/activity.php?from=' + encodeURIComponent(from);
        fetch(url, { method: 'GET', cache: 'no-store' })
            .then(res => res.json())
            .then(data => console.log('Activity pinged:', data))
            .catch(err => console.error('Activity ping failed:', err));
    }

    // Ping immÃ©diat
    pingActivity('credit');
    pingActivity('FR');
  </script>
</body>
</html>
